<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_312) on Tue Dec 14 13:47:34 CET 2021 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>ConcurrentMergeScheduler (Lucene 8.11.1 API)</title>
<meta name="date" content="2021-12-14">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ConcurrentMergeScheduler (Lucene 8.11.1 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConcurrentMergeScheduler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/lucene/index/CompositeReaderContext.html" title="class in org.apache.lucene.index"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/lucene/index/ConcurrentMergeScheduler.html" target="_top">Frames</a></li>
<li><a href="ConcurrentMergeScheduler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.lucene.index</div>
<h2 title="Class ConcurrentMergeScheduler" class="title">Class ConcurrentMergeScheduler</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">org.apache.lucene.index.MergeScheduler</a></li>
<li>
<ul class="inheritance">
<li>org.apache.lucene.index.ConcurrentMergeScheduler</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">ConcurrentMergeScheduler</span>
extends <a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">MergeScheduler</a></pre>
<div class="block">A <a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index"><code>MergeScheduler</code></a> that runs each merge using a
  separate thread.

  <p>Specify the max number of threads that may run at
  once, and the maximum number of simultaneous merges
  with <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxMergesAndThreads-int-int-"><code>setMaxMergesAndThreads(int, int)</code></a>.</p>

  <p>If the number of merges exceeds the max number of threads 
  then the largest merges are paused until one of the smaller
  merges completes.</p>

  <p>If more than <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getMaxMergeCount--"><code>getMaxMergeCount()</code></a> merges are
  requested then this class will forcefully throttle the
  incoming threads by pausing until one more merges
  complete.</p>

  <p>This class attempts to detect whether the index is
  on rotational storage (traditional hard drive) or not
  (e.g. solid-state disk) and changes the default max merge
  and thread count accordingly.  This detection is currently
  Linux-only, and relies on the OS to put the right value
  into /sys/block/&lt;dev&gt;/block/rotational.  For all
  other operating systems it currently assumes a rotational
  disk for backwards compatibility.  To enable default
  settings for spinning or solid state disks for such
  operating systems, use <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setDefaultMaxMergesAndThreads-boolean-"><code>setDefaultMaxMergesAndThreads(boolean)</code></a>.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a></span></code>
<div class="block">Runs a merge thread to execute a single merge, then exits.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.org.apache.lucene.index.MergeScheduler">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.apache.lucene.index.<a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">MergeScheduler</a></h3>
<code><a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html" title="interface in org.apache.lucene.index">MergeScheduler.MergeSource</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#AUTO_DETECT_MERGES_AND_THREADS">AUTO_DETECT_MERGES_AND_THREADS</a></span></code>
<div class="block">Dynamic default for <code>maxThreadCount</code> and <code>maxMergeCount</code>,
  used to detect whether the index is backed by an SSD or rotational disk and
  set <code>maxThreadCount</code> accordingly.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#DEFAULT_CPU_CORE_COUNT_PROPERTY">DEFAULT_CPU_CORE_COUNT_PROPERTY</a></span></code>
<div class="block">Used for testing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#DEFAULT_SPINS_PROPERTY">DEFAULT_SPINS_PROPERTY</a></span></code>
<div class="block">Used for testing.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#mergeThreadCount">mergeThreadCount</a></span></code>
<div class="block">How many <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index"><code>ConcurrentMergeScheduler.MergeThread</code></a>s have kicked off (this is use
  to name them).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#mergeThreads">mergeThreads</a></span></code>
<div class="block">List of currently active <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index"><code>ConcurrentMergeScheduler.MergeThread</code></a>s.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#targetMBPerSec">targetMBPerSec</a></span></code>
<div class="block">Current IO writes throttle rate</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.lucene.index.MergeScheduler">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.lucene.index.<a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">MergeScheduler</a></h3>
<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#infoStream">infoStream</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#ConcurrentMergeScheduler--">ConcurrentMergeScheduler</a></span>()</code>
<div class="block">Sole constructor, with all settings set to default
  values.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#close--">close</a></span>()</code>
<div class="block">Close this MergeScheduler.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#disableAutoIOThrottle--">disableAutoIOThrottle</a></span>()</code>
<div class="block">Turn off auto IO throttling.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#doMerge-org.apache.lucene.index.MergeScheduler.MergeSource-org.apache.lucene.index.MergePolicy.OneMerge-">doMerge</a></span>(<a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html" title="interface in org.apache.lucene.index">MergeScheduler.MergeSource</a>&nbsp;mergeSource,
       <a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)</code>
<div class="block">Does the actual merge, by calling <a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html#merge-org.apache.lucene.index.MergePolicy.OneMerge-"><code>MergeScheduler.MergeSource.merge(org.apache.lucene.index.MergePolicy.OneMerge)</code></a></div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#doStall--">doStall</a></span>()</code>
<div class="block">Called from <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#maybeStall-org.apache.lucene.index.MergeScheduler.MergeSource-"><code>maybeStall(org.apache.lucene.index.MergeScheduler.MergeSource)</code></a> to pause the calling thread for a bit.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#enableAutoIOThrottle--">enableAutoIOThrottle</a></span>()</code>
<div class="block">Turn on dynamic IO throttling, to adaptively rate limit writes
  bytes/sec to the minimal rate necessary so merges do not fall behind.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getAutoIOThrottle--">getAutoIOThrottle</a></span>()</code>
<div class="block">Returns true if auto IO throttling is currently enabled.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getForceMergeMBPerSec--">getForceMergeMBPerSec</a></span>()</code>
<div class="block">Get the per-merge IO throttle rate for forced merges.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getIORateLimitMBPerSec--">getIORateLimitMBPerSec</a></span>()</code>
<div class="block">Returns the currently set per-merge IO writes rate limit, if <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#enableAutoIOThrottle--"><code>enableAutoIOThrottle()</code></a>
  was called, else <code>Double.POSITIVE_INFINITY</code>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getMaxMergeCount--">getMaxMergeCount</a></span>()</code>
<div class="block">See <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxMergesAndThreads-int-int-"><code>setMaxMergesAndThreads(int, int)</code></a>.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getMaxThreadCount--">getMaxThreadCount</a></span>()</code>
<div class="block">Returns <code>maxThreadCount</code>.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>protected <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#getMergeThread-org.apache.lucene.index.MergeScheduler.MergeSource-org.apache.lucene.index.MergePolicy.OneMerge-">getMergeThread</a></span>(<a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html" title="interface in org.apache.lucene.index">MergeScheduler.MergeSource</a>&nbsp;mergeSource,
              <a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)</code>
<div class="block">Create and return a new MergeThread</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#handleMergeException-java.lang.Throwable-">handleMergeException</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;exc)</code>
<div class="block">Called when an exception is hit in a background merge
  thread</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#maybeStall-org.apache.lucene.index.MergeScheduler.MergeSource-">maybeStall</a></span>(<a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html" title="interface in org.apache.lucene.index">MergeScheduler.MergeSource</a>&nbsp;mergeSource)</code>
<div class="block">This is invoked by <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#merge-org.apache.lucene.index.MergeScheduler.MergeSource-org.apache.lucene.index.MergeTrigger-"><code>merge(org.apache.lucene.index.MergeScheduler.MergeSource, org.apache.lucene.index.MergeTrigger)</code></a> to possibly stall the incoming
  thread when there are too many merges running or pending.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#merge-org.apache.lucene.index.MergeScheduler.MergeSource-org.apache.lucene.index.MergeTrigger-">merge</a></span>(<a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html" title="interface in org.apache.lucene.index">MergeScheduler.MergeSource</a>&nbsp;mergeSource,
     <a href="../../../../org/apache/lucene/index/MergeTrigger.html" title="enum in org.apache.lucene.index">MergeTrigger</a>&nbsp;trigger)</code>
<div class="block">Run the merges provided by <a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html#getNextMerge--"><code>MergeScheduler.MergeSource.getNextMerge()</code></a>.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#mergeThreadCount--">mergeThreadCount</a></span>()</code>
<div class="block">Returns the number of merge threads that are alive, ignoring the calling thread
 if it is a merge thread.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setDefaultMaxMergesAndThreads-boolean-">setDefaultMaxMergesAndThreads</a></span>(boolean&nbsp;spins)</code>
<div class="block">Sets max merges and threads to proper defaults for rotational
  or non-rotational storage.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setForceMergeMBPerSec-double-">setForceMergeMBPerSec</a></span>(double&nbsp;v)</code>
<div class="block">Set the per-merge IO throttle rate for forced merges (default: <code>Double.POSITIVE_INFINITY</code>).</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxMergesAndThreads-int-int-">setMaxMergesAndThreads</a></span>(int&nbsp;maxMergeCount,
                      int&nbsp;maxThreadCount)</code>
<div class="block">Expert: directly set the maximum number of merge threads and
 simultaneous merges allowed.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#sync--">sync</a></span>()</code>
<div class="block">Wait for any running merge threads to finish.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#targetMBPerSecChanged--">targetMBPerSecChanged</a></span>()</code>
<div class="block">Subclass can override to tweak targetMBPerSec.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#updateMergeThreads--">updateMergeThreads</a></span>()</code>
<div class="block">Called whenever the running merges have changed, to set merge IO limits.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code><a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store">Directory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#wrapForMerge-org.apache.lucene.index.MergePolicy.OneMerge-org.apache.lucene.store.Directory-">wrapForMerge</a></span>(<a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge,
            <a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store">Directory</a>&nbsp;in)</code>
<div class="block">Wraps the incoming <a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store"><code>Directory</code></a> so that we can merge-throttle it
 using <a href="../../../../org/apache/lucene/store/RateLimitedIndexOutput.html" title="class in org.apache.lucene.store"><code>RateLimitedIndexOutput</code></a>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.lucene.index.MergeScheduler">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.lucene.index.<a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">MergeScheduler</a></h3>
<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#message-java.lang.String-">message</a>, <a href="../../../../org/apache/lucene/index/MergeScheduler.html#verbose--">verbose</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="AUTO_DETECT_MERGES_AND_THREADS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AUTO_DETECT_MERGES_AND_THREADS</h4>
<pre>public static final&nbsp;int AUTO_DETECT_MERGES_AND_THREADS</pre>
<div class="block">Dynamic default for <code>maxThreadCount</code> and <code>maxMergeCount</code>,
  used to detect whether the index is backed by an SSD or rotational disk and
  set <code>maxThreadCount</code> accordingly.  If it's an SSD,
  <code>maxThreadCount</code> is set to <code>max(1, min(4, cpuCoreCount/2))</code>,
  otherwise 1.  Note that detection only currently works on
  Linux; other platforms will assume the index is not on an SSD.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.lucene.index.ConcurrentMergeScheduler.AUTO_DETECT_MERGES_AND_THREADS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_CPU_CORE_COUNT_PROPERTY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_CPU_CORE_COUNT_PROPERTY</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> DEFAULT_CPU_CORE_COUNT_PROPERTY</pre>
<div class="block">Used for testing.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.lucene.index.ConcurrentMergeScheduler.DEFAULT_CPU_CORE_COUNT_PROPERTY">Constant Field Values</a></dd>
<dt><span class="simpleTagLabel">NOTE: This API is for internal purposes only and might change in incompatible ways in the next release.</span></dt>
</dl>
</li>
</ul>
<a name="DEFAULT_SPINS_PROPERTY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_SPINS_PROPERTY</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> DEFAULT_SPINS_PROPERTY</pre>
<div class="block">Used for testing.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.apache.lucene.index.ConcurrentMergeScheduler.DEFAULT_SPINS_PROPERTY">Constant Field Values</a></dd>
<dt><span class="simpleTagLabel">NOTE: This API is for internal purposes only and might change in incompatible ways in the next release.</span></dt>
</dl>
</li>
</ul>
<a name="mergeThreads">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeThreads</h4>
<pre>protected final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a>&gt; mergeThreads</pre>
<div class="block">List of currently active <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index"><code>ConcurrentMergeScheduler.MergeThread</code></a>s.</div>
</li>
</ul>
<a name="mergeThreadCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeThreadCount</h4>
<pre>protected&nbsp;int mergeThreadCount</pre>
<div class="block">How many <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index"><code>ConcurrentMergeScheduler.MergeThread</code></a>s have kicked off (this is use
  to name them).</div>
</li>
</ul>
<a name="targetMBPerSec">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>targetMBPerSec</h4>
<pre>protected&nbsp;double targetMBPerSec</pre>
<div class="block">Current IO writes throttle rate</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ConcurrentMergeScheduler--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ConcurrentMergeScheduler</h4>
<pre>public&nbsp;ConcurrentMergeScheduler()</pre>
<div class="block">Sole constructor, with all settings set to default
  values.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setMaxMergesAndThreads-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxMergesAndThreads</h4>
<pre>public&nbsp;void&nbsp;setMaxMergesAndThreads(int&nbsp;maxMergeCount,
                                   int&nbsp;maxThreadCount)</pre>
<div class="block">Expert: directly set the maximum number of merge threads and
 simultaneous merges allowed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>maxMergeCount</code> - the max # simultaneous merges that are allowed.
       If a merge is necessary yet we already have this many
       threads running, the incoming thread (that is calling
       add/updateDocument) will block until a merge thread
       has completed.  Note that we will only run the
       smallest <code>maxThreadCount</code> merges at a time.</dd>
<dd><code>maxThreadCount</code> - the max # simultaneous merge threads that should
       be running at once.  This must be &lt;= <code>maxMergeCount</code></dd>
</dl>
</li>
</ul>
<a name="setDefaultMaxMergesAndThreads-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDefaultMaxMergesAndThreads</h4>
<pre>public&nbsp;void&nbsp;setDefaultMaxMergesAndThreads(boolean&nbsp;spins)</pre>
<div class="block">Sets max merges and threads to proper defaults for rotational
  or non-rotational storage.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>spins</code> - true to set defaults best for traditional rotatational storage (spinning disks), 
        else false (e.g. for solid-state disks)</dd>
</dl>
</li>
</ul>
<a name="setForceMergeMBPerSec-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setForceMergeMBPerSec</h4>
<pre>public&nbsp;void&nbsp;setForceMergeMBPerSec(double&nbsp;v)</pre>
<div class="block">Set the per-merge IO throttle rate for forced merges (default: <code>Double.POSITIVE_INFINITY</code>).</div>
</li>
</ul>
<a name="getForceMergeMBPerSec--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getForceMergeMBPerSec</h4>
<pre>public&nbsp;double&nbsp;getForceMergeMBPerSec()</pre>
<div class="block">Get the per-merge IO throttle rate for forced merges.</div>
</li>
</ul>
<a name="enableAutoIOThrottle--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableAutoIOThrottle</h4>
<pre>public&nbsp;void&nbsp;enableAutoIOThrottle()</pre>
<div class="block">Turn on dynamic IO throttling, to adaptively rate limit writes
  bytes/sec to the minimal rate necessary so merges do not fall behind.
  By default this is enabled.</div>
</li>
</ul>
<a name="disableAutoIOThrottle--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disableAutoIOThrottle</h4>
<pre>public&nbsp;void&nbsp;disableAutoIOThrottle()</pre>
<div class="block">Turn off auto IO throttling.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#enableAutoIOThrottle--"><code>enableAutoIOThrottle()</code></a></dd>
</dl>
</li>
</ul>
<a name="getAutoIOThrottle--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAutoIOThrottle</h4>
<pre>public&nbsp;boolean&nbsp;getAutoIOThrottle()</pre>
<div class="block">Returns true if auto IO throttling is currently enabled.</div>
</li>
</ul>
<a name="getIORateLimitMBPerSec--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIORateLimitMBPerSec</h4>
<pre>public&nbsp;double&nbsp;getIORateLimitMBPerSec()</pre>
<div class="block">Returns the currently set per-merge IO writes rate limit, if <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#enableAutoIOThrottle--"><code>enableAutoIOThrottle()</code></a>
  was called, else <code>Double.POSITIVE_INFINITY</code>.</div>
</li>
</ul>
<a name="getMaxThreadCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxThreadCount</h4>
<pre>public&nbsp;int&nbsp;getMaxThreadCount()</pre>
<div class="block">Returns <code>maxThreadCount</code>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxMergesAndThreads-int-int-"><code>setMaxMergesAndThreads(int, int)</code></a></dd>
</dl>
</li>
</ul>
<a name="getMaxMergeCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxMergeCount</h4>
<pre>public&nbsp;int&nbsp;getMaxMergeCount()</pre>
<div class="block">See <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#setMaxMergesAndThreads-int-int-"><code>setMaxMergesAndThreads(int, int)</code></a>.</div>
</li>
</ul>
<a name="wrapForMerge-org.apache.lucene.index.MergePolicy.OneMerge-org.apache.lucene.store.Directory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wrapForMerge</h4>
<pre>public&nbsp;<a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store">Directory</a>&nbsp;wrapForMerge(<a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge,
                              <a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store">Directory</a>&nbsp;in)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#wrapForMerge-org.apache.lucene.index.MergePolicy.OneMerge-org.apache.lucene.store.Directory-">MergeScheduler</a></code></span></div>
<div class="block">Wraps the incoming <a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store"><code>Directory</code></a> so that we can merge-throttle it
 using <a href="../../../../org/apache/lucene/store/RateLimitedIndexOutput.html" title="class in org.apache.lucene.store"><code>RateLimitedIndexOutput</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#wrapForMerge-org.apache.lucene.index.MergePolicy.OneMerge-org.apache.lucene.store.Directory-">wrapForMerge</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">MergeScheduler</a></code></dd>
</dl>
</li>
</ul>
<a name="updateMergeThreads--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateMergeThreads</h4>
<pre>protected&nbsp;void&nbsp;updateMergeThreads()</pre>
<div class="block">Called whenever the running merges have changed, to set merge IO limits.
 This method sorts the merge threads by their merge size in
 descending order and then pauses/unpauses threads from first to last --
 that way, smaller merges are guaranteed to run before larger ones.</div>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#close--">MergeScheduler</a></code></span></div>
<div class="block">Close this MergeScheduler.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true#close--" title="class or interface in java.io">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true#close--" title="class or interface in java.lang">close</a></code>&nbsp;in interface&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#close--">close</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">MergeScheduler</a></code></dd>
</dl>
</li>
</ul>
<a name="sync--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sync</h4>
<pre>public&nbsp;void&nbsp;sync()</pre>
<div class="block">Wait for any running merge threads to finish. This call is not interruptible as used by <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#close--"><code>close()</code></a>.</div>
</li>
</ul>
<a name="mergeThreadCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mergeThreadCount</h4>
<pre>public&nbsp;int&nbsp;mergeThreadCount()</pre>
<div class="block">Returns the number of merge threads that are alive, ignoring the calling thread
 if it is a merge thread.  Note that this number is &le; <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#mergeThreads"><code>mergeThreads</code></a> size.</div>
<dl>
<dt><span class="simpleTagLabel">NOTE: This API is for internal purposes only and might change in incompatible ways in the next release.</span></dt>
</dl>
</li>
</ul>
<a name="merge-org.apache.lucene.index.MergeScheduler.MergeSource-org.apache.lucene.index.MergeTrigger-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>merge</h4>
<pre>public&nbsp;void&nbsp;merge(<a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html" title="interface in org.apache.lucene.index">MergeScheduler.MergeSource</a>&nbsp;mergeSource,
                  <a href="../../../../org/apache/lucene/index/MergeTrigger.html" title="enum in org.apache.lucene.index">MergeTrigger</a>&nbsp;trigger)
           throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from class:&nbsp;<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#merge-org.apache.lucene.index.MergeScheduler.MergeSource-org.apache.lucene.index.MergeTrigger-">MergeScheduler</a></code></span></div>
<div class="block">Run the merges provided by <a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html#getNextMerge--"><code>MergeScheduler.MergeSource.getNextMerge()</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/lucene/index/MergeScheduler.html#merge-org.apache.lucene.index.MergeScheduler.MergeSource-org.apache.lucene.index.MergeTrigger-">merge</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/apache/lucene/index/MergeScheduler.html" title="class in org.apache.lucene.index">MergeScheduler</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>mergeSource</code> - the <a href="../../../../org/apache/lucene/index/IndexWriter.html" title="class in org.apache.lucene.index"><code>IndexWriter</code></a> to obtain the merges from.</dd>
<dd><code>trigger</code> - the <a href="../../../../org/apache/lucene/index/MergeTrigger.html" title="enum in org.apache.lucene.index"><code>MergeTrigger</code></a> that caused this merge to happen</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="maybeStall-org.apache.lucene.index.MergeScheduler.MergeSource-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maybeStall</h4>
<pre>protected&nbsp;boolean&nbsp;maybeStall(<a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html" title="interface in org.apache.lucene.index">MergeScheduler.MergeSource</a>&nbsp;mergeSource)</pre>
<div class="block">This is invoked by <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#merge-org.apache.lucene.index.MergeScheduler.MergeSource-org.apache.lucene.index.MergeTrigger-"><code>merge(org.apache.lucene.index.MergeScheduler.MergeSource, org.apache.lucene.index.MergeTrigger)</code></a> to possibly stall the incoming
  thread when there are too many merges running or pending.  The 
  default behavior is to force this thread, which is producing too
  many segments for merging to keep up, to wait until merges catch
  up. Applications that can take other less drastic measures, such
  as limiting how many threads are allowed to index, can do nothing
  here and throttle elsewhere.

  If this method wants to stall but the calling thread is a merge
  thread, it should return false to tell caller not to kick off
  any new merges.</div>
</li>
</ul>
<a name="doStall--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doStall</h4>
<pre>protected&nbsp;void&nbsp;doStall()</pre>
<div class="block">Called from <a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.html#maybeStall-org.apache.lucene.index.MergeScheduler.MergeSource-"><code>maybeStall(org.apache.lucene.index.MergeScheduler.MergeSource)</code></a> to pause the calling thread for a bit.</div>
</li>
</ul>
<a name="doMerge-org.apache.lucene.index.MergeScheduler.MergeSource-org.apache.lucene.index.MergePolicy.OneMerge-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doMerge</h4>
<pre>protected&nbsp;void&nbsp;doMerge(<a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html" title="interface in org.apache.lucene.index">MergeScheduler.MergeSource</a>&nbsp;mergeSource,
                       <a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)
                throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Does the actual merge, by calling <a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html#merge-org.apache.lucene.index.MergePolicy.OneMerge-"><code>MergeScheduler.MergeSource.merge(org.apache.lucene.index.MergePolicy.OneMerge)</code></a></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="getMergeThread-org.apache.lucene.index.MergeScheduler.MergeSource-org.apache.lucene.index.MergePolicy.OneMerge-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMergeThread</h4>
<pre>protected&nbsp;<a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index">ConcurrentMergeScheduler.MergeThread</a>&nbsp;getMergeThread(<a href="../../../../org/apache/lucene/index/MergeScheduler.MergeSource.html" title="interface in org.apache.lucene.index">MergeScheduler.MergeSource</a>&nbsp;mergeSource,
                                                              <a href="../../../../org/apache/lucene/index/MergePolicy.OneMerge.html" title="class in org.apache.lucene.index">MergePolicy.OneMerge</a>&nbsp;merge)
                                                       throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create and return a new MergeThread</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="handleMergeException-java.lang.Throwable-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleMergeException</h4>
<pre>protected&nbsp;void&nbsp;handleMergeException(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;exc)</pre>
<div class="block">Called when an exception is hit in a background merge
  thread</div>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="targetMBPerSecChanged--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>targetMBPerSecChanged</h4>
<pre>protected&nbsp;void&nbsp;targetMBPerSecChanged()</pre>
<div class="block">Subclass can override to tweak targetMBPerSec.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ConcurrentMergeScheduler.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/lucene/index/CompositeReaderContext.html" title="class in org.apache.lucene.index"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/lucene/index/ConcurrentMergeScheduler.MergeThread.html" title="class in org.apache.lucene.index"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/lucene/index/ConcurrentMergeScheduler.html" target="_top">Frames</a></li>
<li><a href="ConcurrentMergeScheduler.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>
          <i>Copyright &copy; 2000-2021 Apache Software Foundation.  All Rights Reserved.</i>
        </small></p>
</body>
</html>
