<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_312) on Tue Dec 14 13:47:37 CET 2021 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>MMapDirectory (Lucene 8.11.1 API)</title>
<meta name="date" content="2021-12-14">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MMapDirectory (Lucene 8.11.1 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MMapDirectory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/lucene/store/MergeInfo.html" title="class in org.apache.lucene.store"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/lucene/store/NativeFSLockFactory.html" title="class in org.apache.lucene.store"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/lucene/store/MMapDirectory.html" target="_top">Frames</a></li>
<li><a href="MMapDirectory.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.lucene.store</div>
<h2 title="Class MMapDirectory" class="title">Class MMapDirectory</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store">org.apache.lucene.store.Directory</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/apache/lucene/store/BaseDirectory.html" title="class in org.apache.lucene.store">org.apache.lucene.store.BaseDirectory</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/apache/lucene/store/FSDirectory.html" title="class in org.apache.lucene.store">org.apache.lucene.store.FSDirectory</a></li>
<li>
<ul class="inheritance">
<li>org.apache.lucene.store.MMapDirectory</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">MMapDirectory</span>
extends <a href="../../../../org/apache/lucene/store/FSDirectory.html" title="class in org.apache.lucene.store">FSDirectory</a></pre>
<div class="block">File-based <a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store"><code>Directory</code></a> implementation that uses
  mmap for reading, and <code>FSDirectory.FSIndexOutput</code> for writing.

 <p><b>NOTE</b>: memory mapping uses up a portion of the
 virtual memory address space in your process equal to the
 size of the file being mapped.  Before using this class,
 be sure your have plenty of virtual address space, e.g. by
 using a 64 bit JRE, or a 32 bit JRE with indexes that are
 guaranteed to fit within the address space.
 On 32 bit platforms also consult <a href="../../../../org/apache/lucene/store/MMapDirectory.html#MMapDirectory-java.nio.file.Path-org.apache.lucene.store.LockFactory-int-"><code>MMapDirectory(Path, LockFactory, int)</code></a>
 if you have problems with mmap failing because of fragmented
 address space. If you get an OutOfMemoryException, it is recommended
 to reduce the chunk size, until it works.

 <p>Due to <a href="http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4724038">
 this bug</a> in Sun's JRE, MMapDirectory's <a href="../../../../org/apache/lucene/store/IndexInput.html#close--"><code>IndexInput.close()</code></a>
 is unable to close the underlying OS file handle.  Only when GC
 finally collects the underlying objects, which could be quite
 some time later, will the file handle be closed.

 <p>This will consume additional transient disk usage: on Windows,
 attempts to delete or overwrite the files will result in an
 exception; on other platforms, which typically have a &quot;delete on
 last close&quot; semantics, while such operations will succeed, the bytes
 are still consuming space on disk.  For many applications this
 limitation is not a problem (e.g. if you have plenty of disk space,
 and you don't rely on overwriting files on Windows) but it's still
 an important limitation to be aware of.

 <p>This class supplies the workaround mentioned in the bug report
 (see <a href="../../../../org/apache/lucene/store/MMapDirectory.html#setUseUnmap-boolean-"><code>setUseUnmap(boolean)</code></a>), which may fail on
 non-Oracle/OpenJDK JVMs. It forcefully unmaps the buffer on close by using
 an undocumented internal cleanup functionality. If
 <a href="../../../../org/apache/lucene/store/MMapDirectory.html#UNMAP_SUPPORTED"><code>UNMAP_SUPPORTED</code></a> is <code>true</code>, the workaround
 will be automatically enabled (with no guarantees; if you discover
 any problems, you can disable it).
 <p>
 <b>NOTE:</b> Accessing this class either directly or
 indirectly from a thread while it's interrupted can close the
 underlying channel immediately if at the same time the thread is
 blocked on IO. The channel will remain closed and subsequent access
 to <a href="../../../../org/apache/lucene/store/MMapDirectory.html" title="class in org.apache.lucene.store"><code>MMapDirectory</code></a> will throw a <a href="https://docs.oracle.com/javase/8/docs/api/java/nio/channels/ClosedChannelException.html?is-external=true" title="class or interface in java.nio.channels"><code>ClosedChannelException</code></a>. If
 your application uses either <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Thread.html?is-external=true#interrupt--" title="class or interface in java.lang"><code>Thread.interrupt()</code></a> or
 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Future.html?is-external=true#cancel-boolean-" title="class or interface in java.util.concurrent"><code>Future.cancel(boolean)</code></a> you should use the legacy <code>RAFDirectory</code>
 from the Lucene <code>misc</code> module in favor of <a href="../../../../org/apache/lucene/store/MMapDirectory.html" title="class in org.apache.lucene.store"><code>MMapDirectory</code></a>.
 </p></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.html">Blog post about MMapDirectory</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#DEFAULT_MAX_CHUNK_SIZE">DEFAULT_MAX_CHUNK_SIZE</a></span></code>
<div class="block">Default max chunk size.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#UNMAP_NOT_SUPPORTED_REASON">UNMAP_NOT_SUPPORTED_REASON</a></span></code>
<div class="block">if <a href="../../../../org/apache/lucene/store/MMapDirectory.html#UNMAP_SUPPORTED"><code>UNMAP_SUPPORTED</code></a> is <code>false</code>, this contains the reason why unmapping is not supported.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#UNMAP_SUPPORTED">UNMAP_SUPPORTED</a></span></code>
<div class="block"><code>true</code>, if this platform supports unmapping mmapped files.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.lucene.store.FSDirectory">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.lucene.store.<a href="../../../../org/apache/lucene/store/FSDirectory.html" title="class in org.apache.lucene.store">FSDirectory</a></h3>
<code><a href="../../../../org/apache/lucene/store/FSDirectory.html#directory">directory</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.apache.lucene.store.BaseDirectory">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.apache.lucene.store.<a href="../../../../org/apache/lucene/store/BaseDirectory.html" title="class in org.apache.lucene.store">BaseDirectory</a></h3>
<code><a href="../../../../org/apache/lucene/store/BaseDirectory.html#isOpen">isOpen</a>, <a href="../../../../org/apache/lucene/store/BaseDirectory.html#lockFactory">lockFactory</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#MMapDirectory-java.nio.file.Path-">MMapDirectory</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file">Path</a>&nbsp;path)</code>
<div class="block">Create a new MMapDirectory for the named location and <a href="../../../../org/apache/lucene/store/FSLockFactory.html#getDefault--"><code>FSLockFactory.getDefault()</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#MMapDirectory-java.nio.file.Path-int-">MMapDirectory</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file">Path</a>&nbsp;path,
             int&nbsp;maxChunkSize)</code>
<div class="block">Create a new MMapDirectory for the named location and <a href="../../../../org/apache/lucene/store/FSLockFactory.html#getDefault--"><code>FSLockFactory.getDefault()</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#MMapDirectory-java.nio.file.Path-org.apache.lucene.store.LockFactory-">MMapDirectory</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file">Path</a>&nbsp;path,
             <a href="../../../../org/apache/lucene/store/LockFactory.html" title="class in org.apache.lucene.store">LockFactory</a>&nbsp;lockFactory)</code>
<div class="block">Create a new MMapDirectory for the named location.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#MMapDirectory-java.nio.file.Path-org.apache.lucene.store.LockFactory-int-">MMapDirectory</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file">Path</a>&nbsp;path,
             <a href="../../../../org/apache/lucene/store/LockFactory.html" title="class in org.apache.lucene.store">LockFactory</a>&nbsp;lockFactory,
             int&nbsp;maxChunkSize)</code>
<div class="block">Create a new MMapDirectory for the named location, specifying the 
 maximum chunk size used for memory mapping.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#getMaxChunkSize--">getMaxChunkSize</a></span>()</code>
<div class="block">Returns the current mmap chunk size.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#getPreload--">getPreload</a></span>()</code>
<div class="block">Returns <code>true</code> if mapped pages should be loaded.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#getUseUnmap--">getUseUnmap</a></span>()</code>
<div class="block">Returns <code>true</code>, if the unmap workaround is enabled.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../../org/apache/lucene/store/IndexInput.html" title="class in org.apache.lucene.store">IndexInput</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#openInput-java.lang.String-org.apache.lucene.store.IOContext-">openInput</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
         <a href="../../../../org/apache/lucene/store/IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&nbsp;context)</code>
<div class="block">Creates an IndexInput for the file with the given name.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#setPreload-boolean-">setPreload</a></span>(boolean&nbsp;preload)</code>
<div class="block">Set to <code>true</code> to ask mapped pages to be loaded
 into physical memory on init.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/apache/lucene/store/MMapDirectory.html#setUseUnmap-boolean-">setUseUnmap</a></span>(boolean&nbsp;useUnmapHack)</code>
<div class="block">This method enables the workaround for unmapping the buffers
 from address space after closing <a href="../../../../org/apache/lucene/store/IndexInput.html" title="class in org.apache.lucene.store"><code>IndexInput</code></a>, that is
 mentioned in the bug report.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.lucene.store.FSDirectory">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.lucene.store.<a href="../../../../org/apache/lucene/store/FSDirectory.html" title="class in org.apache.lucene.store">FSDirectory</a></h3>
<code><a href="../../../../org/apache/lucene/store/FSDirectory.html#close--">close</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#createOutput-java.lang.String-org.apache.lucene.store.IOContext-">createOutput</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#createTempOutput-java.lang.String-java.lang.String-org.apache.lucene.store.IOContext-">createTempOutput</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#deleteFile-java.lang.String-">deleteFile</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#deletePendingFiles--">deletePendingFiles</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#ensureCanRead-java.lang.String-">ensureCanRead</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#fileLength-java.lang.String-">fileLength</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#fsync-java.lang.String-">fsync</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#getDirectory--">getDirectory</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#getPendingDeletions--">getPendingDeletions</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#listAll--">listAll</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#listAll-java.nio.file.Path-">listAll</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#open-java.nio.file.Path-">open</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#open-java.nio.file.Path-org.apache.lucene.store.LockFactory-">open</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#rename-java.lang.String-java.lang.String-">rename</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#sync-java.util.Collection-">sync</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#syncMetaData--">syncMetaData</a>, <a href="../../../../org/apache/lucene/store/FSDirectory.html#toString--">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.lucene.store.BaseDirectory">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.lucene.store.<a href="../../../../org/apache/lucene/store/BaseDirectory.html" title="class in org.apache.lucene.store">BaseDirectory</a></h3>
<code><a href="../../../../org/apache/lucene/store/BaseDirectory.html#ensureOpen--">ensureOpen</a>, <a href="../../../../org/apache/lucene/store/BaseDirectory.html#obtainLock-java.lang.String-">obtainLock</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.apache.lucene.store.Directory">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.apache.lucene.store.<a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store">Directory</a></h3>
<code><a href="../../../../org/apache/lucene/store/Directory.html#copyFrom-org.apache.lucene.store.Directory-java.lang.String-java.lang.String-org.apache.lucene.store.IOContext-">copyFrom</a>, <a href="../../../../org/apache/lucene/store/Directory.html#getTempFileName-java.lang.String-java.lang.String-long-">getTempFileName</a>, <a href="../../../../org/apache/lucene/store/Directory.html#openChecksumInput-java.lang.String-org.apache.lucene.store.IOContext-">openChecksumInput</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="DEFAULT_MAX_CHUNK_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_CHUNK_SIZE</h4>
<pre>public static final&nbsp;int DEFAULT_MAX_CHUNK_SIZE</pre>
<div class="block">Default max chunk size.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/apache/lucene/store/MMapDirectory.html#MMapDirectory-java.nio.file.Path-org.apache.lucene.store.LockFactory-int-"><code>MMapDirectory(Path, LockFactory, int)</code></a></dd>
</dl>
</li>
</ul>
<a name="UNMAP_SUPPORTED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>UNMAP_SUPPORTED</h4>
<pre>public static final&nbsp;boolean UNMAP_SUPPORTED</pre>
<div class="block"><code>true</code>, if this platform supports unmapping mmapped files.</div>
</li>
</ul>
<a name="UNMAP_NOT_SUPPORTED_REASON">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UNMAP_NOT_SUPPORTED_REASON</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> UNMAP_NOT_SUPPORTED_REASON</pre>
<div class="block">if <a href="../../../../org/apache/lucene/store/MMapDirectory.html#UNMAP_SUPPORTED"><code>UNMAP_SUPPORTED</code></a> is <code>false</code>, this contains the reason why unmapping is not supported.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MMapDirectory-java.nio.file.Path-org.apache.lucene.store.LockFactory-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MMapDirectory</h4>
<pre>public&nbsp;MMapDirectory(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file">Path</a>&nbsp;path,
                     <a href="../../../../org/apache/lucene/store/LockFactory.html" title="class in org.apache.lucene.store">LockFactory</a>&nbsp;lockFactory)
              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create a new MMapDirectory for the named location.
  The directory is created at the named location if it does not yet exist.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the path of the directory</dd>
<dd><code>lockFactory</code> - the lock factory to use</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if there is a low-level I/O error</dd>
</dl>
</li>
</ul>
<a name="MMapDirectory-java.nio.file.Path-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MMapDirectory</h4>
<pre>public&nbsp;MMapDirectory(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file">Path</a>&nbsp;path)
              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create a new MMapDirectory for the named location and <a href="../../../../org/apache/lucene/store/FSLockFactory.html#getDefault--"><code>FSLockFactory.getDefault()</code></a>.
  The directory is created at the named location if it does not yet exist.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the path of the directory</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if there is a low-level I/O error</dd>
</dl>
</li>
</ul>
<a name="MMapDirectory-java.nio.file.Path-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MMapDirectory</h4>
<pre>public&nbsp;MMapDirectory(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file">Path</a>&nbsp;path,
                     int&nbsp;maxChunkSize)
              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create a new MMapDirectory for the named location and <a href="../../../../org/apache/lucene/store/FSLockFactory.html#getDefault--"><code>FSLockFactory.getDefault()</code></a>.
  The directory is created at the named location if it does not yet exist.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the path of the directory</dd>
<dd><code>maxChunkSize</code> - maximum chunk size (default is 1 GiBytes for
 64 bit JVMs and 256 MiBytes for 32 bit JVMs) used for memory mapping.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if there is a low-level I/O error</dd>
</dl>
</li>
</ul>
<a name="MMapDirectory-java.nio.file.Path-org.apache.lucene.store.LockFactory-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MMapDirectory</h4>
<pre>public&nbsp;MMapDirectory(<a href="https://docs.oracle.com/javase/8/docs/api/java/nio/file/Path.html?is-external=true" title="class or interface in java.nio.file">Path</a>&nbsp;path,
                     <a href="../../../../org/apache/lucene/store/LockFactory.html" title="class in org.apache.lucene.store">LockFactory</a>&nbsp;lockFactory,
                     int&nbsp;maxChunkSize)
              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create a new MMapDirectory for the named location, specifying the 
 maximum chunk size used for memory mapping.
  The directory is created at the named location if it does not yet exist.
 <p>
 Especially on 32 bit platform, the address space can be very fragmented,
 so large index files cannot be mapped. Using a lower chunk size makes 
 the directory implementation a little bit slower (as the correct chunk 
 may be resolved on lots of seeks) but the chance is higher that mmap 
 does not fail. On 64 bit Java platforms, this parameter should always 
 be <code>1 &lt;&lt; 30</code>, as the address space is big enough.
 <p>
 <b>Please note:</b> The chunk size is always rounded down to a power of 2.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>path</code> - the path of the directory</dd>
<dd><code>lockFactory</code> - the lock factory to use, or null for the default
 (<a href="../../../../org/apache/lucene/store/NativeFSLockFactory.html" title="class in org.apache.lucene.store"><code>NativeFSLockFactory</code></a>);</dd>
<dd><code>maxChunkSize</code> - maximum chunk size (default is 1 GiBytes for
 64 bit JVMs and 256 MiBytes for 32 bit JVMs) used for memory mapping.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if there is a low-level I/O error</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setUseUnmap-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUseUnmap</h4>
<pre>public&nbsp;void&nbsp;setUseUnmap(boolean&nbsp;useUnmapHack)</pre>
<div class="block">This method enables the workaround for unmapping the buffers
 from address space after closing <a href="../../../../org/apache/lucene/store/IndexInput.html" title="class in org.apache.lucene.store"><code>IndexInput</code></a>, that is
 mentioned in the bug report. This hack may fail on non-Oracle/OpenJDK JVMs.
 It forcefully unmaps the buffer on close by using
 an undocumented internal cleanup functionality.
 <p><b>NOTE:</b> Enabling this is completely unsupported
 by Java and may lead to JVM crashes if <code>IndexInput</code>
 is closed while another thread is still accessing it (SIGSEGV).
 <p>To enable the hack, the following requirements need to be
 fulfilled: The used JVM must be Oracle Java / OpenJDK 8
 <em>(preliminary support for Java 9 EA build 150+ was added with Lucene 6.4)</em>.
 In addition, the following permissions need to be granted
 to <code>lucene-core.jar</code> in your
 <a href="http://docs.oracle.com/javase/8/docs/technotes/guides/security/PolicyFiles.html">policy file</a>:
 <ul>
 <li><code>permission java.lang.reflect.ReflectPermission "suppressAccessChecks";</code></li>
 <li><code>permission java.lang.RuntimePermission "accessClassInPackage.sun.misc";</code></li>
 </ul></div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <a href="../../../../org/apache/lucene/store/MMapDirectory.html#UNMAP_SUPPORTED"><code>UNMAP_SUPPORTED</code></a>
 is <code>false</code> and the workaround cannot be enabled.
 The exception message also contains an explanation why the hack
 cannot be enabled (e.g., missing permissions).</dd>
</dl>
</li>
</ul>
<a name="getUseUnmap--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUseUnmap</h4>
<pre>public&nbsp;boolean&nbsp;getUseUnmap()</pre>
<div class="block">Returns <code>true</code>, if the unmap workaround is enabled.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/apache/lucene/store/MMapDirectory.html#setUseUnmap-boolean-"><code>setUseUnmap(boolean)</code></a></dd>
</dl>
</li>
</ul>
<a name="setPreload-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPreload</h4>
<pre>public&nbsp;void&nbsp;setPreload(boolean&nbsp;preload)</pre>
<div class="block">Set to <code>true</code> to ask mapped pages to be loaded
 into physical memory on init. The behavior is best-effort 
 and operating system dependent.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="https://docs.oracle.com/javase/8/docs/api/java/nio/MappedByteBuffer.html?is-external=true#load--" title="class or interface in java.nio"><code>MappedByteBuffer.load()</code></a></dd>
</dl>
</li>
</ul>
<a name="getPreload--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPreload</h4>
<pre>public&nbsp;boolean&nbsp;getPreload()</pre>
<div class="block">Returns <code>true</code> if mapped pages should be loaded.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/apache/lucene/store/MMapDirectory.html#setPreload-boolean-"><code>setPreload(boolean)</code></a></dd>
</dl>
</li>
</ul>
<a name="getMaxChunkSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxChunkSize</h4>
<pre>public final&nbsp;int&nbsp;getMaxChunkSize()</pre>
<div class="block">Returns the current mmap chunk size.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/apache/lucene/store/MMapDirectory.html#MMapDirectory-java.nio.file.Path-org.apache.lucene.store.LockFactory-int-"><code>MMapDirectory(Path, LockFactory, int)</code></a></dd>
</dl>
</li>
</ul>
<a name="openInput-java.lang.String-org.apache.lucene.store.IOContext-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>openInput</h4>
<pre>public&nbsp;<a href="../../../../org/apache/lucene/store/IndexInput.html" title="class in org.apache.lucene.store">IndexInput</a>&nbsp;openInput(<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name,
                            <a href="../../../../org/apache/lucene/store/IOContext.html" title="class in org.apache.lucene.store">IOContext</a>&nbsp;context)
                     throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Creates an IndexInput for the file with the given name.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/apache/lucene/store/Directory.html#openInput-java.lang.String-org.apache.lucene.store.IOContext-">openInput</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/apache/lucene/store/Directory.html" title="class in org.apache.lucene.store">Directory</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - the name of an existing file.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - in case of I/O error</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MMapDirectory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/lucene/store/MergeInfo.html" title="class in org.apache.lucene.store"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/apache/lucene/store/NativeFSLockFactory.html" title="class in org.apache.lucene.store"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/lucene/store/MMapDirectory.html" target="_top">Frames</a></li>
<li><a href="MMapDirectory.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>
          <i>Copyright &copy; 2000-2021 Apache Software Foundation.  All Rights Reserved.</i>
        </small></p>
</body>
</html>
